######################################################################################################
######################################################################################################
#### JAGS model file written by runjags version 2.0.4-2 on 2019-10-05 17:33:16 
######################################################################################################
######################################################################################################

model{
for(k in 1:max(year_no)){
for(j in 1:max(season_weeks)){
#this fits the blended model to your observed data. 
y[k,j] ~ dnorm(mu[k,j],tau_obs)
}
#### Process Model
for(j in 2:max(season_weeks)){
mu[k,j]~dnorm(mu[k,j-1],tau_proc) 
}
#Loops through number of years and defines prior for each year
mu[k,1] ~ dnorm(x_ic,tau_ic) #keep in mind you'll need to index like a matrix 
}
#### Priors
tau_proc ~ dgamma(a_proc,r_proc)
tau_obs ~ dgamma(a_obs, r_obs)
}
#monitor# tau_proc, tau_obs, mu

######################################################################################################
######################################################################################################
#### Initial values 
######################################################################################################
######################################################################################################

inits{
".RNG.state" <- c(8, 371766741, -1604219585, 1232541616, -167679482, -354239338, -1148001606, 187425136, -512988984, 2035925368, 407095837, 47458313, 1256752263, -1038253857, -1034477435, -1621965772, -785793470, 342046122, 283752217, -725320700, -1888909055, 1626460143, -1747616433, 1500537476, 1298256768, -1047381667, -212130769, -1362961899, -1599667265, 269611314, -1947200333, 514269924, -1057125981, 583344988, 997854990, -423302289, -471950468, 1656753530, 1808745960, 388556655, -1613822050, -360162494, 1814222416, 627597734, 551658618, 186876745, -1375460887, -1926703893, -211034904, 920833377, 1603820289, 1066524441, -987978950, 1273117665, -1427865840, 482852581, 1977832157, -398967716, -865820827, -1150953044, 1920882138, 1396388884, 1587750706, -880098313, 1922427049, 399399640, 25007338, 1551538215, 1280755044, -760283054, 1548429667, -458582290, -541243621, 1534820398, -265669310, -599548853, -1271764653, 1816765571, 979755862, -772435074, -1245862589, 321555539, -723245364, -1095690357, -403800525, -1936347759, -1845764034, -187323880, -2144028534, -836979293, 2078483672, 704045804, 1908779821, -813453111, -1483758386, -2038378960, 675841332, -1347004678, 922107999, -208528089, -573510662, -582783403, 1915938912, -1237632211, -1131550076, 1961101454, 1809012009, 1262011350, -418764396, 148805950, 1122173777, 588782032, 562590797, -1012517714, 87606433, 1772987146, 1340775719, 1233625829, 763513747, 1488363424, 1296545919, -1664190967, -704182026, -707060796, -167265283, -640880564, -2101198812, 682367300, 1267990745, 2012658351, -1716248206, -1274633395, -1964795421, -2079431166, 102262724, 994163338, -2119354325, 1444053782, 233108081, -212183472, -289570098, 219371195, 1453460399, -724594766, 1460853147, -2098038800, 703698706, -721967579, 1528806843, -1833904542, 1890127359, -1394807031, -804089070, -1184326875, -1348757241, 1382371924, 566112426, -77243787, 1097626634, 1859102400, -710218183, 1927049847, -622918859, 1177064527, -93276240, -1447636907, 61712517, -868817972, -1294408556, -1352800821, 748296658, -2072048071, -657163408, 593104008, 898936035, -1064636348, -2048511537, -992916198, 447633911, 1573174444, 2108523080, -752011429, -65875182, 667545935, -1079395925, -1528809254, 773144863, 1875878788, 699682388, 1300431556, 60339734, 1521983845, 885776649, 364749252, 1455087592, 159178548, 980425496, 760618600, -1329072524, -683673283, 1840636500, 1342784671, 648936439, 193556058, -11161756, -1273530272, -795082082, -1382865948, -905096578, 1222758938, 631911521, 1766555959, -917974994, 699679102, 1528628443, 1556475608, 3324486, -230888489, -1579299779, 427323001, 756468902, 782553702, 2058477890, -2094116015, -264896659, -666573354, -2116175139, -1275922352, -1272566804, -1767731925, 2117891504, -280389440, 856241700, 250401944, 1875644300, 900384706, 522990632, 1598553985, -86929055, -1609071064, 1392574404, -1422305138, 884487140, 1397231978, -2065372643, 2111387039, -1841956162, -815436320, 1425821296, 345422371, 2054284480, -1930802929, -1570468329, -555660025, 7235082, -1624668585, 1247111718, -1876625575, -2022357446, -1850219617, -1929346812, 1668395524, -256037970, 1076548480, 1799595140, -1254217247, 1994856564, 1531683081, -183347199, 2006399535, -2002786882, 2140115237, 1686010234, 1847301186, 1487586315, -579350151, 1573798887, -103235491, -1945657281, 758947727, -1266052967, 657830964, -901838597, 648657600, 1800298741, 1860764370, -64138038, 1386498509, -488001238, -2121412568, 1593128014, 1455634467, -1898549326, -1889947096, 1597980319, -736073682, -739193489, -1912792610, 1207384104, 221139824, -606875162, 1955797048, -1873333418, -1957960799, 1425148267, -1191441348, 505605168, 892198411, -605390257, -1015833669, 2073890203, 115929387, 1843197360, 1148645513, -1091314582, 876054200, 633295493, 2081076557, -1006894909, 1048090161, -827101181, 126811197, -2123053531, -1197836337, 1442429931, 588794905, 1275887984, -1104807617, -664869362, 2144597617, 1645082807, 365633317, -2025000572, -409905081, 149166969, 291824919, -412903837, 1790879194, -840322613, 1862571475, 1776572776, -1776863383, 1128354491, -132610973, -1418737771, 365672102, 1570109373, 2033524961, -375658518, -2129712042, -1875341663, 2079826657, 1610915335, -831225557, -161420109, -29547586, 702340723, 1451918363, -297152161, -736928715, -45806715, 1308220135, 470328641, -1544467210, -1716222629, 1614297180, 1937026467, -917197371, -672337367, 1703909785, 652506864, 1241350748, -2100088333, 884106504, 45582540, 1428286339, -691236598, -991565306, -564945859, -135344496, -32833919, -415346717, 1968747826, 1010654529, -1235564782, 1247112151, -423139298, 584031629, 1359096880, 759269053, -27468793, -474603429, 1851185905, -374542062, 2093422239, 1526562478, 1153761847, 879057438, 1593623753, -1294388631, -2076272379, -459999215, -497486755, 1961090674, 481747988, -69447285, -1095507962, 1048680460, 1482688586, -670338320, 820391570, 1405429089, -1302692028, 1892339383, -995598410, -467668976, -970250978, -140348602, -759010826, 528955331, 1593597630, -87319462, -788703586, 284898808, -410004522, -610993351, 2136003567, -882204833, 24549652, 879473558, 1812805358, -310637559, 1275098650, 2039694891, 2140848419, -1752424016, -1919413972, 1733585611, 2095499267, -347461758, -816948207, -445852548, 1633075921, 1557522091, -1820281805, -382644842, 292449724, 1937021602, -1063338375, 1099825210, 680127602, -2047756299, 1388880642, 1831760720, 1231099144, -1527350525, 1580873997, 1570298754, 749075516, -241253489, -466308428, -690400689, 923073973, 674518768, -186761380, -44154677, 1666839949, 65187765, 1798249878, 1136750349, 643374689, 91642112, -1019698507, 1341750108, -450612095, -2081222008, -659961848, -800276296, 515122082, 1100927631, 530084157, 1156396106, 549063823, 1979794891, 1316949043, -397113512, 1513018946, 1496955201, 909801388, -821401632, -263884048, -2047504710, 415358150, 1183675414, 1649613279, -1179583349, 931519259, -1444482745, -2051857480, -1847195967, 287893369, -585981724, 353442156, -1884035585, 1086704171, -108400607, 495518280, -414439179, -1790768585, -1385014551, -1267184679, 2145726036, 1813659867, -1922677457, 1895730561, 1771805757, 681559469, 1202556544, -879628360, -1379716560, 732353090, -1084853489, 1311750024, 1982996307, 235064428, -1304564214, -60101600, -1901935294, -654528868, 1710185729, -1573471974, -1726938941, 1888681374, -1420482890, -1929115686, -809112751, 1752173944, 1776224825, -1068872118, -1343287667, 390136117, -711771861, -1284893246, -321269243, 459366104, 1062038166, 1465356936, 819417641, 1539057258, -1083370859, -983961485, -633396879, 170284028, 2123117469, -629154386, 784220685, -1005286636, 809111605, 1414567255, -1116222401, -1624477162, -1091059574, 96719434, 1565177188, -135162635, -2142230707, -1908787568, -918326651, 384731381, 1365073196, -1761076812, -370399042, -590546334, -1723050663, 1483182222, -1304055474, -824112634, -1521233090, -1865199913, -491242278, -794867000, -2045245208, -666348030, -385138416, -60978642, 1643369491, -1357780576, -371749691, -1878259052, -146317381, -270353944, 774990686, -519582866, 1369437433, -2082016716, 172924513, 326245438, 490757178, -750941779, 1108529640, -784936418, 1981301967, -2302274, 1298712475, 113826470, 1152284574, 1657358970, 1872057801, 524759840, 1213177771, -1915698349, -1120006217, -253882349, -8850956, -864683465, 1296092833, 556743455, 1509640189, -1526316819, 299081901, 1957577644, 795111938, -384476798, 853813860, -428232661)
"mu" <- structure(c(-4.90460424004949, -5.03353623565265, -4.82855039530552, -5.02720393483976, -4.95277213020987, -4.95198819124213, -5.71871553743956, -2.88102968447821, -6.16876568189031, -6.03934697280288, -5.16777120596477, -5.21106368267143, -4.07414796859845, -3.93003926570977, -5.92922849520097, -3.52436148956704, -6.50490587743007, -4.37553308646748, -4.73751038653268, -3.39225979290694, -6.56771192261068, -1.65885068568446, -3.78716450250846, -1.99549846565058, -3.49742171249107, -3.18923057832546, -4.77296254697672, -1.22207835109534, -3.71455916009308, -1.94521884163435, -5.0286832347301, -1.38543835165756, -5.54433796537499, -2.28548819971931, -2.08427254886956, -0.214633387250121, -2.0820373338715, -3.36970943764397, -4.48728790751579, -2.65283801684001, -3.59930516290825, 2.00795796845587, -0.942952956763705, -3.85256447315786, -3.82291263600798, -2.72199381162478, -2.61348457268855, 0.573644556962372, 0.323364093442023, -1.27607687641051, -2.63166581204597, -1.58431833032658, -1.67230302405563, 0.865242902318941, -0.716115944660559, -1.7670924581283, -3.43404244794474, -0.960785285050085, -1.22610586380626, -0.0521051909195956, -0.438127768335684, 2.38948773449912, -0.0214010452752201, -0.245450563897785, -0.104850021576274, 0.00580301485338913, -0.569040374787966, 2.90549077612738, -0.0526728602526301, 0.0658010416581271, -1.17956159599624, -0.899308980917244, 0.236362438418121, 3.30126910246193, -0.150203908033584, -0.606367977117154, -0.042332898258051, 0.586074332033093, 0.83017577673323, 0.748546199452208, 0.607879260600872, -0.683921209608043, 0.320463307242689, -2.41152864610331, 0.459526549260184, -0.321928555842531, 0.10032953805051, -0.829448846864836, -0.0669717714657079, 0.0281738162301656, -1.03272135675753, -1.41004706018721, -0.905156861457301, -1.89216799697589, 1.87423852758815, -0.519546957677695, -2.39319164984496, -1.93786724978164, -2.91911330264336, -1.26349064058767, 2.13491257465845, 0.383819553791949, 0.233216863065527, -2.40737064924216, -3.47382590431709, -0.958363394465466, 2.76697329514983, -2.23993703897582, -0.886119740476265, -3.08737858745008, -5.23736345977383, -3.02646885575853, 0.657380325817235, -1.40592267701018, -0.177110215722316, -3.44566302694847, -4.86269218255482, -2.43504044895557, -0.562825553477749, -1.95106984080498), .Dim = c(6, 20))
"tau_obs" <- 1.33916504177717
"tau_proc" <- 0.456182491191697
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Mersenne-Twister"
}

inits{
".RNG.state" <- c(14620, 29688, 8179)
"mu" <- structure(c(-4.9297526633185, -4.88996779480921, -4.98799163255917, -5.06112235171354, -5.00435872420113, -4.90901975525209, -5.37225014839816, -2.54549740361435, -5.5273561455728, -5.26470826132298, -5.53999259316608, -4.28176545313056, -4.88005356383703, -3.83549483113772, -4.78214134165426, -3.6111904520775, -6.48506646781177, -4.2978610844597, -3.94491691718337, -3.55877101086032, -5.19195522027382, -3.09580744235491, -4.92281672926336, -2.32208753041866, -4.13015710085079, -2.82994749706996, -4.6369532668313, -2.37523071798777, -3.11037114768251, -0.633917167560564, -4.80993241625463, -0.855801926095248, -4.73121941644339, -3.0943042823586, -3.12305859943388, 0.333933982272043, -2.37821664627734, -2.64190224463168, -4.01235187237799, -1.07930800929903, -1.97647902468123, 0.782892779830613, -0.592280080794504, -2.89665127592322, -2.95566171527696, -1.96460742944406, -3.43312740519218, 0.293292134112899, -0.359741156900513, -1.36623511617059, -2.6300226574091, -1.40646356507168, -3.15622500682135, 0.0211473922314312, -1.23896823942259, -0.0860366080900676, -1.52406809336606, -0.929838832312778, -1.73765161456081, -0.512981793650108, -1.88499297465479, 1.98299663151829, -0.512074700673922, -0.0436802288261038, -1.43649431184843, 0.606285433792105, -1.89609174067037, 2.30670919960612, -1.03389237218868, -0.427576482538879, -1.01704977900466, -0.136820964441489, -0.874014698415989, 3.1642371602354, 0.175219821349887, -0.0765492686461067, 0.447534288820244, 0.442185945571844, -0.0481639247127284, 2.10154392863175, 0.329139131776401, -0.827653278381389, 0.123344223313079, -0.579521795760374, -0.779947874914881, 0.577510008383277, -1.19381377586995, -1.09265877962095, 0.0570534195911221, 0.845628387963306, -1.59876218431547, -0.839857758571162, -2.63819669377931, -1.12700753755262, 0.276228193369197, 0.413233372195092, -1.96693226453208, -2.91616098920888, -2.85219390666135, -1.02943117799621, 1.97197558684283, 0.172486681431308, 0.402669688024005, -2.69423222075488, -3.62466881448332, -2.44590055735293, 1.29970480494627, -2.05960389910003, -1.59589478847408, -2.9923180123738, -6.62851306789646, -4.24692416346735, 0.3490611195093, -1.86388983580141, -0.0149139719966153, -3.67359633460166, -7.00495344547443, -3.68649418819288, -1.12198056214061, -2.70379508270619), .Dim = c(6, 20))
"tau_obs" <- 1.30075526785448
"tau_proc" <- 0.884922188124999
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Wichmann-Hill"
}

inits{
".RNG.state" <- c(92695706, 1003103825)
"mu" <- structure(c(-4.99276727743436, -4.96318301101609, -4.93482727159565, -5.08809160416605, -4.93798989414791, -4.94237865179712, -4.95264221321477, -2.94185799168139, -4.25260350958004, -4.49106721723111, -5.29395405803316, -5.66654297803166, -4.98501537026054, -3.57460503035706, -5.67941895471301, -3.89234262079539, -6.18096197190227, -4.95731904218175, -3.64634341076122, -3.42736123440044, -4.8586361250423, -2.2437418358481, -4.3064915376353, -2.5157511471922, -4.57685941229798, -2.22017604276367, -3.59190687017736, -2.1166028504623, -4.47752464381077, -1.92842106766104, -5.3448791260912, -0.0206128326963961, -4.70768298667164, -3.36101905626035, -2.98941982657541, 0.182763749907101, -4.3033654175865, -2.20820612053774, -4.82242555690244, -2.63570784166313, -2.61385778764905, 1.35309354340646, -2.22310163180829, -1.65544260592489, -2.16836274371361, -2.05616603319501, -3.90386997809612, -0.189762663891076, -1.6944927360419, -0.015323785099183, -3.11864983781905, -1.06332549166074, -2.65136300476321, -0.189143967325878, 0.471944571287849, -1.18307991602429, -2.37314620606856, -0.588497669091857, -1.3600239370787, 0.62112512247949, -0.081753102394315, 1.57189774311202, 0.427689122232394, 0.00546996547218326, -1.26400726580534, 1.05742740783473, -0.913378440607919, 2.52951993080719, -1.29941811777069, 0.327204526765731, -1.26395936429676, -0.228976756385105, 0.47554211781479, 3.81048811360059, -0.0891805831895608, -0.899450966978879, -0.462647413703979, 0.944734627719182, 0.573769535369877, 0.46526078653234, 0.214184560874819, -1.31368664966323, 0.600733243235917, -0.198696292179066, 0.189161820328349, 0.207959118728864, -0.65030549320126, -1.32262564942375, -0.539809225748271, 0.223611278976691, -0.634158890575799, -0.795771228154953, -1.71699015905087, -0.920263422568926, 0.751627504393399, -0.197670110846047, -1.75874889832088, -0.948555446711645, -3.44876028183649, -1.46232793544018, 1.76302837283818, -0.51615473050511, -0.113385731689915, -3.15317102412896, -3.98311194154042, -1.15997488176186, 4.7430878184181, -2.6842047714566, -0.414925148000543, -3.42453206776849, -5.42711343030169, -3.45872985309569, 0.581888614314964, -3.02792126070119, 0.758500344750597, -2.98669898814051, -4.99659386557537, -2.21036775487959, -0.656009129001379, -1.75431238975197), .Dim = c(6, 20))
"tau_obs" <- 1.29490878800283
"tau_proc" <- 0.765401569445239
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Marsaglia-Multicarry"
}



######################################################################################################
######################################################################################################
#### Data 
######################################################################################################
######################################################################################################

data{
"y" <- structure(c(-4.06591991745718, -2.94665209430014, -5.80914299031403, -5.80914299031403, -5.80914299031403, -5.80914299031403, -4.59783674154387, -1.88686814833501, -4.59783674154387, -5.80914299031403, -5.80914299031403, -4.59783674154387, NA, -4.06591991745718, -5.80914299031403, -2.94665209430014, -5.80914299031403, -5.80914299031403, -3.26053097886945, -3.72054301540761, -5.80914299031403, -1.93466900116998, -3.72054301540761, -1.98486998368036, -4.06591991745718, -2.60726358981506, -4.59783674154387, -0.668845883547919, -3.72054301540761, -1.47248282297889, -5.80914299031403, 0.655974922329534, -5.80914299031403, -4.59783674154387, -3.72054301540761, 0.281988862342713, -2.51565896414186, -2.70811366311588, -5.80914299031403, -1.18037030439171, -2.70811366311588, 1.31661982654987, -1.53614971441768, -2.82028710501947, -1.53614971441768, -2.15263466474332, -2.60726358981506, -0.0653754237762429, -0.589253733521219, -0.711150923698861, -1.8412483567478, -1.25195872848308, -2.51565896414186, 0.543420073956604, -0.211473338919426, -2.21545316410442, -1.47248282297889, -0.696849461552251, -1.01127799732093, 0.265852896722762, -1.03091569138165, 2.75676687558721, -0.168704041457194, -0.382628870687186, -0.615086916013517, 0.535170022761435, -2.60726358981506, 3.57821555646438, -1.75581432451179, 0.163154257134424, -0.833582703939862, -0.53950714937723, 1.18076288241878, 3.79205461642565, 1.4123738990455, -1.8412483567478, -0.60208690792214, 0.8962786165969, -0.013864711444381, 1.55353770544924, 0.869955466752787, -1.27700755822547, 1.06823942041139, -1.18037030439171, -0.576583164939999, -0.696849461552251, 0.0554034869116419, -0.382628870687186, 0.462152453642488, 0.138825724259713, -1.32906996434575, -0.900920880514602, -0.770494290290964, -0.56407113301186, 1.43788878016486, -0.900920880514602, -2.28248391223017, -1.88686814833501, -2.82028710501947, -0.43587591418692, 2.24561904248638, 0.677760368893093, 1.5185224738127, -2.94665209430014, -4.06591991745718, -1.1135661849228, 4.40231277434833, -2.28248391223017, NA, -4.06591991745718, -5.80914299031403, -3.72054301540761, -0.770494290290964, -4.06591991745718, -0.274600501197854, -3.09132676577126, -5.80914299031403, -3.46431559990757, -1.44210761092232, -2.0377249228153), .Dim = c(6, 20))
"year_no" <- c(1, 2, 3, 4, 5, 6)
"season_weeks" <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20)
"x_ic" <- -5
"tau_ic" <- 100
"a_proc" <- 0.001
"r_proc" <- 0.001
"a_obs" <- 0.001
"r_obs" <- 0.001


}

######################################################################################################
######################################################################################################
