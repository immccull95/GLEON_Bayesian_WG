######################################################################################################
######################################################################################################
#### JAGS model file written by runjags version 2.0.4-2 on 2019-08-10 11:28:06 
######################################################################################################
######################################################################################################

model{
for(k in 1:max(year_no)){
for(j in 1:max(season_weeks)){
#this fits the blended model to your observed data. 
y[k,j] ~ dnorm(mu[k,j],tau_obs)
}
#### Process Model
for(j in 2:max(season_weeks)){
mu[k,j]~dnorm(mu[k,j-1],tau_proc) 
}
#Loops through number of years and defines prior for each year
mu[k,1] ~ dnorm(x_ic,tau_ic) #keep in mind you'll need to index like a matrix 
}
#### Priors
tau_proc ~ dgamma(a_proc,r_proc)
tau_obs ~ dgamma(a_obs, r_obs)
}
#monitor# tau_proc, tau_obs, mu

######################################################################################################
######################################################################################################
#### Initial values 
######################################################################################################
######################################################################################################

inits{
".RNG.state" <- c(590, 2064504861, -1017789420, -1527624005, 526959195, 1915951683, 1885440900, -1872570324, -1722226427, 1512529621, 249476095, 631732974, -321436891, -297304728, -1742677439, 859222584, 121057192, 1993616812, -1804134412, 805312769, 809151484, 1962491392, -1764308981, -1827243997, 729420526, 991343231, 1877966441, 696259465, -1676763512, -672370888, -1912209551, 1814876111, -1179339828, -1915766022, 1199069682, -1911169628, 622636035, -1803106303, -368234208, -774309030, 1493121655, -1184591855, -1084507735, 1113702991, 384470862, 1270650746, -750013998, -314637547, 705615155, -791188014, -65154605, -1549434189, -145296046, -1462727038, -2060055625, -483611188, 307286497, -1375953593, -1654586486, -417662697, -1310323941, 641678721, 809256865, -1364361079, 705435164, 1764791211, -162410245, 1406238662, -1477601255, -583773636, 2102454961, -74677690, 1741083357, -407657611, -1012419382, -69160043, 485812700, -175658441, 808808523, 306659085, 476111174, 215352372, -528720730, 810627997, -42712299, -1241912071, 1719564771, -1361267041, -696779525, -1128508341, 959308640, 492449524, 1422538217, 1052728976, -1641360077, -613152321, -512455881, -151908853, -1542320203, -801731871, 1796040357, 147185525, -564528468, 872258357, 1717057909, -52599783, 2055384898, 1308831046, 1704867194, 1917738891, 1729572513, -1354875994, 744649627, -1802003936, 472001196, -756970512, -539048087, -7105228, -1709019271, -105425574, 954980901, -2039377712, -1581506422, 539138566, -1195559674, 925455101, -691952046, 336783631, 1356240955, -1530361423, 2126383446, 1302577543, 205180944, -780227488, -782350433, 776031389, 427919422, 2042560820, 127193130, 1865122916, -1707276088, 1765988001, -781995131, 1201620549, 374232876, 97812329, -1759045505, 1934087505, -855491491, 1027153308, 945177619, -449683288, 2067548865, -1340759011, 268981416, 2084454800, 692991497, -465766943, 1979022776, -180442269, -455710780, 929478797, 1248257354, -1935325192, -191136927, -1912217414, 136459201, 963303538, 2042860175, -1136220818, 1941438729, 39076670, -2037702822, 1830760701, 599465798, -1612936785, 653132314, 1925643325, 1465197330, 387060932, 1146411277, 376257659, 1501373295, 1011823707, -563153834, 1844834150, -1262553363, 88106944, 1974173450, -439458118, 2108689084, -1070406984, 1808760748, -819375649, 323164499, -785301694, -2065405657, -716111505, 2067666217, 384368505, 1642408942, -1924107304, -159723468, -837415772, 1188017574, 1240370117, 1803889903, -1284932837, -1192532187, 1787527387, -1610956877, 1472858098, 6870624, 665164690, -1952925292, 768481746, 1325544611, 472184971, -1074882036, -97609843, 1436897981, 1386641774, -904811313, -357502758, 605107617, -548009247, -1206034995, 2123921818, 509045783, 55119941, -1594299726, -1508820404, -126314108, -1612733838, -695452744, 1511748015, 1621228572, -703789615, -264537805, -2135308230, 1337751076, 134230370, 981650868, 859195349, 1495450490, -1187288370, 1329345045, -669238197, 72637018, 1109595350, 2138263991, -1607185577, 682611830, 1541008979, 825853224, 1365548326, -512899245, -1564328374, -1053797635, -207688960, 1447013947, -991542707, -646483315, -1499229963, -1888620220, -56008999, -864871924, -138648799, -1866479759, 1244582305, 1114328235, -1507435071, 1454242815, -177980211, 1039571551, -2134910526, 449513313, -1106506798, -442356720, 1700814418, 1408066699, -1673430129, -1238183989, -1173741803, -2069232928, 1039461366, -787806546, -747065089, -771967619, -535763918, 1735344426, -686020494, -1049230489, -324073737, 709408563, 1837756375, 1087252240, 401319479, -2146850150, 244070739, 29434961, -323051712, -2016187095, -958845239, -1948124777, -742068284, 1976635252, 465109943, 1499055701, 610401624, 809908134, -1361725273, 601964610, -1787446553, -275071112, 35970065, 1635326947, 1470173871, 673233388, 2050821867, 1948874585, -436802181, -1192350670, 396141370, -1726040478, 872372625, -861915050, -1939031244, -2122550782, 966815708, 1547315026, 682464139, 1422916726, -1992812700, 789768691, 456806914, 1883706349, 1847704228, -1542596806, -970632137, -150571943, 178493835, -2042152160, -686907276, 487551533, -1721641961, 1893779228, -1057380311, 1161901798, -233418094, 481684770, 1141075488, -479393089, -2018254316, -958509390, -1362712329, 1937752359, -70311600, 471342055, 1188371514, 1609619504, -749809644, -1473140978, 1095198531, -1760555880, -686157266, 1453254855, -1331657990, 1611174445, 1126327304, -1478237535, 1671732840, -643384602, -127438994, 1925757617, 18474847, 174478341, -1599168141, 780292245, 1135720901, 482227024, -1151428934, -2013647056, 989034292, -1116276775, 220060094, -447486892, -1656080740, 1709239497, 131978452, -557718146, 904695289, 1621095098, 1653675308, -646093327, 912748734, -283800784, 2135192642, 1273958278, 867098229, -829576222, 969678654, -1361430051, 585058217, -744285907, -926864390, 980608268, 270989592, 427929688, -1301136630, -1801323962, 1654422559, 900908837, 1820478167, 1002684747, 346429307, 1039910305, -1986514159, 975667647, 831601044, -108175674, 1079357709, -811323325, -487756173, -387252583, 1501640243, -1795154564, -1423651596, -1712030718, 318273303, 498198730, 376235994, 1209954283, -466233571, -592378853, -2033369738, 1256560252, 725383248, 861727416, -474792652, 410137271, -817177237, -1317131221, -209037365, -925447419, 1426618633, 262101909, -143538672, -460475658, 571517004, 2072551960, 1620150304, 959952957, -760274163, 623241294, -1157512322, -1800000642, -147061002, 1508833929, 943898505, -1671264175, 233469286, 213840609, 1723198309, -1207829395, -1576601987, 889435457, 681083320, -1858062804, -1297234247, 524552610, 463852160, -1339461999, -962866641, 638451262, 243251633, 420098, 791055729, 1031974855, 1052780672, 539514884, -2005562359, -1753831200, -1913480228, -2108536159, 1635067672, -102956842, -812962573, 1975427453, 1508516967, 343137578, -1252335577, 1857630782, 363999294, -2020866018, -322814756, 1154706518, -936011889, -1484871004, 793875392, 519119447, 1690411676, 1395498583, -1403277651, -184327945, -1363045934, 1884603905, -145567573, -2058476934, -1215614310, -1939233805, 5149172, 47449795, 164193019, 337274619, -669619370, -1858916933, -1956680741, 1104209365, -1939144223, -1813343188, 632228136, 1701676172, 1870964255, 2132970222, 538908743, 1956488411, 1287711616, -1963347632, -1344565171, 957988316, 39034962, 1805994676, 307860764, -1725373114, -1315124584, 662268402, 1465375322, 1562509585, -1300402938, -520906322, -1043586796, -416758874, 1416780774, -190018673, -1923082025, 1134547272, 1688777749, -51885489, 619513158, 630112555, -895840106, 173464775, -554468315, 1247195819, -43744784, 325585615, 177343060, 1084971407, -1944303867, -1195806263, -321748252, 566212955, 735184717, 1472202886, -1464986298, -300612663, -1326169477, 240180878, 2119849609, -1468047949, -1873849548, 730931073, -2091035176, 796965131, -1232378438, 869638757, -216023012, -82894606, -1120981490, -1712436544, -1860339415, 1805706092, 694343087, -1011185568, -111739279, -499506847, -178111060, -1155440918, -847923009, 1400444764, 638223326, -778389549, -806801220, -2009249902, -2035205623, 877967177, 1689920470, -1733340447, -589229491, 1379216665, -1139568460, 400283307, 333952382, -704651293, -5245460, 1892315768, -159024623, -1044902269, -682021312, -467162972, -1580258358, -1571936363, -1501359251, 878233069, 540902632, -1671017665, -1539615371, 1507324736, -1498090210, -859041188, -682950862, -791930985, 1418306817, -607508333)
"mu" <- structure(c(0.0927635950703277, 0.318098373881197, 0.145658315142764, -0.0128128079175432, 0.0809336375130795, 0.215036173728631, -0.531249796035738, -1.27195744922297, -0.602262554671645, 0.016847950184404, -2.62491413659374, 0.0571824575201797, 6.44763321894014, -1.25649428594427, 0.893662171886503, 0.181986115985165, 0.679625158215693, -1.09142688604182, -0.845884688212909, -2.1898631345811, -1.69879290344524, -0.571883739611963, -1.31136246256635, -0.733930504812031, 0.335724243575554, -0.200770800360048, -0.337304376032385, 0.975202589440445, 1.18097994708373, 0.662876376147603, -1.57421510218891, 1.59761163756493, -0.357025954153048, -0.736048145034121, -0.862799653774314, 0.439863261403269, 0.723672144024943, -0.357411220691554, 0.500459539967512, -0.566525979349041, 1.58477787020995, 2.52236041790074, -0.418895281772199, -2.41131870949793, -0.793794447995813, 1.62681955450609, -1.13235118866925, 0.071894745890849, 1.43993631261052, 0.455999436544835, 0.325034277523047, -1.14776224399331, 2.57298253368922, 3.11010621999599, 1.33968341847513, 0.0655037248523934, 0.0817071171315059, 0.331765912224901, -0.641297267989791, 3.95280048328597, -0.219574125264436, 15.2739518357929, 0.97230690961483, 2.10638523398885, 1.51088620835918, -0.0717089825644797, -1.33651507778823, 37.0066654304301, 0.309959572864936, 1.36496013641335, 1.44711900463511, -0.640646743966038, 3.31347857849625, 43.3732113093799, 2.15185499081891, -1.24626502599707, 3.25141847838576, 2.89951750991858, 1.66281974598662, 4.34541780355802, 2.00431896092943, 1.34162729867365, 4.26585755531496, -0.513160998172355, 1.26544668565612, -0.273152703907246, -0.319944904288116, -0.26202693305099, 0.782408728091576, -0.593154307039592, 1.83475175086437, 0.559982328106178, 1.15209361970751, 4.31311867647891, 3.99913003555052, 3.69132702859002, 1.19715453364411, 1.10807656295279, -1.08460939154935, 1.43075753654303, 9.94279046694233, -0.246813916282838, 3.88148480397339, -0.954421250836335, 0.0833736981211097, -0.771538771172439, 81.9540059636728, 1.46825465423726, 1.38987499389664, 1.20800142986263, 1.89449753761543, 0.803598329999686, 1.52418994940847, 0.127992077200621, -0.219097545056631, -1.0125330701267, 1.61690582941126, -1.31361073464323, 1.11138732287205, -1.69707849826415), .Dim = c(6, 20))
"tau_obs" <- 0.615234867486404
"tau_proc" <- 0.00780352503148752
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Mersenne-Twister"
}

inits{
".RNG.state" <- c(12393, 12896, 13479)
"mu" <- structure(c(0.0798224875461002, 0.0684734378656562, 0.129509101879378, -0.0669695537908709, 0.216676518487945, 0.0580861132567903, -1.38497602774483, 0.681823581171149, 1.58661858768049, -0.592490094786549, -0.176070309539406, 0.0558267159464355, 3.20722532690161, 0.880948065925595, 0.111699262617712, 1.7851080094764, -2.86914311807755, -0.592065111298101, -0.121498791240613, 1.08307968576913, 1.34673030406933, -0.229091938389961, -2.0941077476422, 0.895718651760897, 0.605676883079475, -1.09210868184173, -0.511363791475722, 0.951372264961599, 0.0420280759280906, 1.05805775523789, -0.811474775181539, 0.117196120710966, 0.639112161552904, -1.24280231557569, 0.718396268526291, 1.5880522060335, 2.7519348221971, -0.710988750671272, -1.82733501779699, 0.43224513129365, -0.0953339070975222, 5.35644424106398, -1.01539768048032, -0.302290185921764, 1.14600496568803, 0.382959575493064, 1.87914027809657, 0.885403576266277, 0.618705186742763, 1.95046039637887, 1.0383963187082, -0.343978426372781, -1.97875079830763, 1.05585194084758, 0.794705106764144, 1.33075743137596, -0.739621005711003, -0.660609712209732, -0.569389294088317, 0.989699010963803, 2.07087542063787, 15.6874246479753, -0.194685767052892, -0.151371962170976, -1.22159049542346, 1.37923157750061, -0.453573419199871, 33.2090562690383, 1.48405387506015, 0.492069811641106, -1.03227899543401, -2.39468736232545, 4.32817751944713, 44.5545119539704, 5.4233129978603, -0.0280841478131979, 0.986106535418912, 1.51469840843495, 0.50667069184605, 4.11977974070679, 2.62804384581825, 0.711494915526438, 2.05659622881286, 1.11826726174632, 1.22901670828593, -0.947115403896482, 0.751668704594674, 0.595952933108498, 0.0772167642593731, 1.66495894643922, 0.932293949458199, 0.464717139675546, 0.868511410817353, -0.219805463679615, 5.94072297501439, 0.875594938448874, 1.17898186422707, 1.85385450454966, 0.928576831271121, 0.0257414801744671, 11.5994092843552, 0.0713103209537811, 4.35524592310534, -1.08759991026579, 2.62976233918365, 0.502907473473642, 79.6074955014762, -1.53633004430364, -14.0468446882896, 0.0857293726089398, 1.82654812006633, 0.56449430869721, 1.05680997762863, -1.47302093240387, 1.40386457106995, -0.476674746381876, 0.90634900536463, 0.577220281893842, 0.270563617227192, 0.649046942993801), .Dim = c(6, 20))
"tau_obs" <- 0.822569051106334
"tau_proc" <- 0.00759055873718046
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Wichmann-Hill"
}

inits{
".RNG.state" <- c(1551916676, 840937194)
"mu" <- structure(c(0.103683762064902, 0.0795204895679947, 0.113603320405813, 0.10912074811984, -0.0635466266308363, 0.256866795667589, 1.95472738404563, 0.207023041858457, 1.23106564759121, 0.283003720942218, 1.05238560665259, -0.466034904340898, -0.758729731836246, -2.05697689387709, -0.720086024022385, -1.06216739445882, -0.123840861732637, 2.18754881777546, -0.975571763015604, -2.11268558688685, 0.510164219477436, 0.0912098129451308, -1.12088767701895, 1.34809673035834, -0.894156723376566, -0.119761559499804, 0.0172287562953456, 0.332235478341467, -0.333617802890935, 1.84004152652066, -1.31947541519572, 1.46548155156096, -1.58256937361824, -0.125685336222205, 0.263646356727958, 1.43329429155984, 1.98027962607539, -1.18382825608955, -0.450207075001452, -0.336081303544971, 1.64554475660619, 2.15323141088148, -0.320612310656931, 0.0950740709638581, 0.163361046823384, -0.404381478707718, -1.11688325587213, 2.64126652350569, 1.21618951837595, -0.164453162400109, 1.4247721406867, 0.691388424547628, 1.40741892325406, 1.74850021234603, -0.762346948887662, 1.10908055113332, 0.476135164014735, 0.015080454659014, 0.147796367173689, 1.51188215108309, 0.0675142989732163, 17.0746468224383, 0.453766872381398, 0.953373576828422, 0.414264419967567, 3.07799979088435, 1.00529187580533, 37.077134877769, 0.711455134625321, 2.63613227480012, 0.507414511543482, -0.19511699115197, 3.57227835105216, 44.2145258419041, 5.51078566230363, 2.41021125643727, -0.476616629543926, 2.19732783638869, 0.820639135701949, 4.45208936923712, 2.32054406576682, 0.0312037707347892, 3.4050738136834, 1.51580864043291, -0.21955283956913, 0.699150228990086, 1.28729528182892, -1.10049385314368, 1.84926193407146, 1.99696405610964, 1.50750224817537, -0.199796344533102, 0.624884304185266, -0.554384467848869, 4.98463243190465, 1.23955830788135, 1.09020795037825, 1.18291494857403, -0.108412201000778, -0.0193081122107688, 8.37744015171964, 1.8997054223192, 4.56393482031262, 0.728096004304675, 0.1445785157356, 1.14596128054993, 80.825171752065, -1.13632987283839, 2.82800729019174, 1.44571278580467, -0.299842679099928, 0.694880403680863, 2.29019533482299, -1.61537403298306, 0.305153478348203, -0.92537088252839, -1.91146011269443, 2.35375670403193, -0.455973347871754, -1.1687589102953), .Dim = c(6, 20))
"tau_obs" <- 0.927728956070742
"tau_proc" <- 0.0100381702116259
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Marsaglia-Multicarry"
}



######################################################################################################
######################################################################################################
#### Data 
######################################################################################################
######################################################################################################

data{
"y" <- structure(c(0.014147208, 0.049515228, 0, 0, 0, 0, 0.007073604, 0.148545685, 0.007073604, 0, 0, 0.007073604, NA, 0.014147208, 0, 0.049515228, 0, 0, 0.03536802, 0.021220812, 0, 0.141472081, 0.021220812, 0.134398477, 0.014147208, 0.07073604, 0.007073604, 0.50929949, 0.021220812, 0.226355329, 0, 1.924020297, 0, 0.007073604, 0.021220812, 1.322763954, 0.077809644, 0.063662436, 0, 0.304164973, 0.063662436, 3.727789325, 0.212208121, 0.056588832, 0.212208121, 0.113177665, 0.07073604, 0.933715732, 0.551741115, 0.488078678, 0.155619289, 0.282944161, 0.077809644, 1.71888578, 0.80639086, 0.106104061, 0.226355329, 0.495152282, 0.360753806, 1.301543142, 0.353680202, 15.74584258, 0.84175888, 0.679065987, 0.537593907, 1.704738572, 0.07073604, 35.80658362, 0.169766497, 1.17421827, 0.431489846, 0.580035531, 3.253857855, 44.34442368, 4.102690339, 0.155619289, 0.544667511, 2.447466995, 0.983230961, 4.725167494, 2.383804559, 0.275870557, 2.907251258, 0.304164973, 0.558814719, 0.495152282, 1.053967001, 0.679065987, 1.584487303, 1.145923853, 0.261723349, 0.40319543, 0.459784262, 0.565888323, 4.2087944, 0.40319543, 0.099030457, 0.148545685, 0.056588832, 0.643697967, 9.443261384, 1.966461921, 4.562474601, 0.049515228, 0.014147208, 0.325385786, 81.63646415, 0.099030457, NA, 0.014147208, 0, 0.021220812, 0.459784262, 0.014147208, 0.756875632, 0.042441624, 0, 0.028294416, 0.233428933, 0.127324873), .Dim = c(6, 20))
"year_no" <- c(1, 2, 3, 4, 5, 6)
"season_weeks" <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20)
"x_ic" <- 0.1
"tau_ic" <- 100
"a_proc" <- 0.001
"r_proc" <- 0.001
"a_obs" <- 29.5
"r_obs" <- 39.4


}

######################################################################################################
######################################################################################################
