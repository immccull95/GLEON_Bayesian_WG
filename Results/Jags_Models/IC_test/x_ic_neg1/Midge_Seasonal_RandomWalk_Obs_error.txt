######################################################################################################
######################################################################################################
#### JAGS model file written by runjags version 2.0.4-2 on 2019-08-16 22:37:06 
######################################################################################################
######################################################################################################

model{
for(k in 1:max(year_no)){
for(j in 1:max(season_weeks)){
#this fits the blended model to your observed data. 
y[k,j] ~ dnorm(mu[k,j],tau_obs)
}
#### Process Model
for(j in 2:max(season_weeks)){
mu[k,j]~dnorm(mu[k,j-1],tau_proc) 
}
#Loops through number of years and defines prior for each year
mu[k,1] ~ dnorm(x_ic,tau_ic) #keep in mind you'll need to index like a matrix 
}
#### Priors
tau_proc ~ dgamma(a_proc,r_proc)
tau_obs ~ dgamma(a_obs, r_obs)
}
#monitor# tau_proc, tau_obs, mu

######################################################################################################
######################################################################################################
#### Initial values 
######################################################################################################
######################################################################################################

inits{
".RNG.state" <- c(18818, 12605, 6534)
"mu" <- structure(c(-0.954430781658282, -1.0949397772004, -0.988736188283711, -0.759199031234128, -1.12698579665139, -1.04953581439463, -1.40397739380456, -1.713445531076, -3.12766972020994, -3.77664162268789, -1.90376450485365, -3.28822100647713, -1.97917628263128, -2.19539245638942, -4.53029885979335, -2.71867056338062, -3.57260087622925, -3.74099226424404, -2.8765389504093, -3.48872498745155, -4.77113135777488, -2.94576668594277, -3.33166957047158, -1.9962283373424, -2.49324747982063, -2.97853887719285, -5.13131710695984, -1.3092569458125, -3.59202670457526, -1.61715451499225, -3.31626008235418, -3.16296946025238, -4.3461756323739, -2.22793399626101, -3.85001405295543, -1.40818920047227, -3.01223296660557, -1.81163289764615, -5.63251564973697, -0.678103194326398, -4.52389258276887, -0.426356671726358, -2.28916557214518, -1.35398523929696, -3.61346971651939, -1.01489814802577, -1.82178914501659, -1.31701994723758, -2.20361703287227, -1.56383974499625, -1.99330945709386, -1.50568505913758, -2.25165675418995, -0.499445905521468, -0.61241048114461, -0.235849269952408, -2.41542335352896, -0.708163015808418, -2.30506011813331, 0.134132642101599, -0.58816939640167, 0.987901043384433, -1.15218998234661, -1.44183720796821, -1.2755872916449, 1.46227533015814, 0.433623003576575, 1.18953963885895, -0.754428923824766, -1.50456906895267, -1.01000363014404, -0.0714775626390366, 0.312259807983019, 1.62294220544202, -0.145137765073646, -1.69098106547558, 0.32997108409378, -0.759891322583354, -1.47501573217892, 0.42210018553258, 0.707236610645693, -0.568623648645704, 0.115465865172655, -0.440440473543252, -0.855961503604956, 0.206179705251482, -0.991740658753031, -0.974301647535335, 0.360589628514706, -0.300416745963312, -1.51045402344483, -0.00357426338469935, -1.11526696028119, -2.09787905700435, -0.55473602794637, -0.608428993010105, -0.618350664574082, -0.794473477519411, -2.83837123328315, -1.96195580680348, 0.338132523263179, -1.33230063354557, -1.11378959750653, -1.92541244133305, -3.73166208468622, -3.08636941838866, 0.954307668175596, -2.3255763005869, -0.757225508463883, -2.01959080003657, -3.79324800142636, -4.09807533640017, 0.682232718707886, -2.49084539578665, -0.357036722158496, -2.70160646149608, -5.48641837887399, -3.36253687218931, -0.291584374019281, -3.18601943637507), .Dim = c(6, 20))
"tau_obs" <- 0.379465915650867
"tau_proc" <- 1.06711170536338
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Wichmann-Hill"
}

inits{
".RNG.state" <- c(1262609152, 853428098)
"mu" <- structure(c(-1.12591121883232, -0.90990909090773, -0.867849108040458, -0.980949916069924, -0.961075140600044, -1.07595077334814, -1.38689817748454, -2.38935762565911, -2.74508618876153, -3.17699262657679, -3.16279853927173, -3.00148463792274, -2.73699305189105, -2.91873658400693, -3.83313926978229, -2.67827338201845, -3.9997197152891, -3.3982038966258, -3.5410834234044, -3.81178941061185, -5.38446121098494, -2.91556572832125, -3.36841578806514, -2.54777005425448, -4.13860883507756, -2.15315278320628, -5.8665286780283, -1.63448037478934, -4.8440766136514, -1.64648959982969, -4.12681176661887, -0.837162146269835, -6.25971438956701, -1.79639737761798, -3.49445305890025, -0.41472176080913, -2.39034248989081, -0.607572684065211, -5.80894984182324, -1.39845888213874, -4.4796936079037, 0.159675790120845, -1.86733533712832, -1.17157342295813, -6.56280647415766, -2.05187241525504, -4.02202230442559, 0.072653896575661, -1.31658713079484, -0.427113837598611, -4.01314597802258, -0.227332781422272, -2.23049078451112, -0.694060343656602, -1.71533872249032, -0.767452961047047, -1.43837894771533, -0.964715306131491, -2.53985505487078, -1.49293440809972, 0.284577163546532, 0.645665199399002, -1.61012594006208, -0.496398362497785, -2.33702189974344, 0.222667036292247, -1.13611722860736, 1.61998536270455, -1.77692778768406, 0.571606058234457, -0.605407778125804, -0.75208299522274, 0.348319883755647, 3.22245382477685, 0.374816464425604, -0.436407231422862, 1.29663490481562, -1.58855439022461, -1.30642011026951, 2.17613073874737, 0.0112539079989521, -0.787543686952414, 1.83271880316721, -0.613085405345239, -0.38194287706727, -0.305039601870013, -0.183886826789724, -1.18147538157632, 2.36335912721439, -1.6704876632287, -0.597298805454842, 0.413659685997865, -0.666925243051047, -0.0356637142955923, 2.74514309021758, -0.67384065016129, -2.22443500825522, -1.61336710351765, -1.55538611575293, -0.581543384793469, 1.47260826576421, -0.970417988751022, -0.0393357814605699, -2.32023520065735, -4.46111718660956, -1.2434746873637, 1.22899849989985, -0.534559965958644, -0.548737296319662, -3.62590589120543, -4.24222276115416, -2.48414709425607, -1.84672072560333, -0.400613106112048, 1.3908347268257, -1.80714496931012, -3.78688424707282, -2.83538952127498, -2.02127266448913, -1.82998523312157), .Dim = c(6, 20))
"tau_obs" <- 0.489630502377732
"tau_proc" <- 0.657103741030859
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Marsaglia-Multicarry"
}

inits{
".RNG.state" <- c(304898913, 469590711)
"mu" <- structure(c(-0.945078670289356, -0.951250979734436, -1.01937862059674, -0.844633915622666, -1.09293577437855, -0.90556612239067, -2.53161538260682, -2.06179145484562, -3.12141990010067, -3.67116682968662, -3.96802873266168, -2.5048761836692, -3.84074843388842, -1.26910761091143, -6.20379726137291, -2.48308305196913, -4.96086552276183, -4.88072386964367, -3.51489772601363, -3.72184390269265, -6.97591494346273, -2.25726860653702, -4.53770723052612, -1.68758783353379, -5.23573304052758, -3.85321729361759, -6.12037881327586, -1.74165920693287, -4.12647675448115, 0.529720797121835, -4.36654495295936, -2.89259803933171, -6.16418199730474, -3.2024027840321, -3.71715613447055, 0.585025927058974, -1.47340862860958, -1.86131990186968, -5.10049179326533, -0.644021467804296, -2.37925502667316, 0.751596645157807, -2.11640418963323, -1.53732397697089, -3.05202449858671, -1.67338594287229, -3.92835597780125, 0.227019622900468, -0.680287349361344, -1.04931352937643, -3.52160288741444, -0.907387067524793, -1.47123774570906, -1.47683208129818, -0.918296567547511, -0.816382227180658, -2.7152934902013, -1.19804748442915, 1.44618571636167, 0.649500939052075, -2.49554862340641, 1.83660291622437, -1.05761253743226, -1.84300081677096, -0.392930502907701, 0.63262073817226, -4.29182128843494, 4.23431459024067, -2.71258929355637, -1.41363011259755, -0.873020722224662, -1.96724163572456, -0.635827975322086, 4.07216626919176, 1.08353615073184, -0.32712268529274, 0.435761716311261, -0.766309031724202, -0.0409546819334179, 2.61622771392552, 0.469718803651552, -1.47062862525192, 0.766128957798998, 0.376258366159998, -0.174766643833241, -1.47941554948076, -0.939315565189725, -2.04784945828478, 1.72298211712756, -0.287964661980809, -1.38136445556168, -1.51409824765084, -1.20238408515649, -1.81229833304515, 1.72949840592884, -1.13101449034757, -1.96279493711961, -1.58990739101693, -4.60961287387502, -1.67004808028578, 1.31389668552972, -0.69790278945319, 0.633878342916958, -2.63856361086919, -4.10270693546308, -1.90125324108928, -0.000270239612575551, -1.31519190099833, -0.00502231208855136, -2.97190997797815, -5.70586616751463, -2.47939218251171, 0.545266973439962, -2.58819007216363, 1.07467365198859, -2.1741603553811, -5.48242770783978, -1.59030725126051, -0.378608117961679, -2.10053457504581), .Dim = c(6, 20))
"tau_obs" <- 0.452119366510051
"tau_proc" <- 0.497330345335712
"y" <- structure(c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = c(6, 20))
".RNG.name" <- "base::Super-Duper"
}



######################################################################################################
######################################################################################################
#### Data 
######################################################################################################
######################################################################################################

data{
"y" <- structure(c(-4.06591991745718, -2.94665209430014, -5.80914299031403, -5.80914299031403, -5.80914299031403, -5.80914299031403, -4.59783674154387, -1.88686814833501, -4.59783674154387, -5.80914299031403, -5.80914299031403, -4.59783674154387, NA, -4.06591991745718, -5.80914299031403, -2.94665209430014, -5.80914299031403, -5.80914299031403, -3.26053097886945, -3.72054301540761, -5.80914299031403, -1.93466900116998, -3.72054301540761, -1.98486998368036, -4.06591991745718, -2.60726358981506, -4.59783674154387, -0.668845883547919, -3.72054301540761, -1.47248282297889, -5.80914299031403, 0.655974922329534, -5.80914299031403, -4.59783674154387, -3.72054301540761, 0.281988862342713, -2.51565896414186, -2.70811366311588, -5.80914299031403, -1.18037030439171, -2.70811366311588, 1.31661982654987, -1.53614971441768, -2.82028710501947, -1.53614971441768, -2.15263466474332, -2.60726358981506, -0.0653754237762429, -0.589253733521219, -0.711150923698861, -1.8412483567478, -1.25195872848308, -2.51565896414186, 0.543420073956604, -0.211473338919426, -2.21545316410442, -1.47248282297889, -0.696849461552251, -1.01127799732093, 0.265852896722762, -1.03091569138165, 2.75676687558721, -0.168704041457194, -0.382628870687186, -0.615086916013517, 0.535170022761435, -2.60726358981506, 3.57821555646438, -1.75581432451179, 0.163154257134424, -0.833582703939862, -0.53950714937723, 1.18076288241878, 3.79205461642565, 1.4123738990455, -1.8412483567478, -0.60208690792214, 0.8962786165969, -0.013864711444381, 1.55353770544924, 0.869955466752787, -1.27700755822547, 1.06823942041139, -1.18037030439171, -0.576583164939999, -0.696849461552251, 0.0554034869116419, -0.382628870687186, 0.462152453642488, 0.138825724259713, -1.32906996434575, -0.900920880514602, -0.770494290290964, -0.56407113301186, 1.43788878016486, -0.900920880514602, -2.28248391223017, -1.88686814833501, -2.82028710501947, -0.43587591418692, 2.24561904248638, 0.677760368893093, 1.5185224738127, -2.94665209430014, -4.06591991745718, -1.1135661849228, 4.40231277434833, -2.28248391223017, NA, -4.06591991745718, -5.80914299031403, -3.72054301540761, -0.770494290290964, -4.06591991745718, -0.274600501197854, -3.09132676577126, -5.80914299031403, -3.46431559990757, -1.44210761092232, -2.0377249228153), .Dim = c(6, 20))
"year_no" <- c(1, 2, 3, 4, 5, 6)
"season_weeks" <- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20)
"x_ic" <- -1
"tau_ic" <- 100
"a_proc" <- 0.001
"r_proc" <- 0.001
"a_obs" <- 15.37
"r_obs" <- 7.84


}

######################################################################################################
######################################################################################################
